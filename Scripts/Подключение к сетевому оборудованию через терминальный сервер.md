Подключение к сетевому оборудованию через терминальный сервер. Тестировался на сети МТС. Для подключения использовался SecureCRT. Терминальный сервер 10.73.1.3. 

```python
import json  
import time  
  
from netmiko import ConnectHandler  
from netmiko import redispatch  
  
device = {  
    'device_type': 'terminal_server',  
    'host': '10.73.1.3',  
    'username': 'логин',  
    'password': 'пароль',  
    'port': 22,  
    'session_log': 'session.log'  
}  
  
net_connect = ConnectHandler(**device)  
print("Jump Server Promt:{}".format(net_connect.find_prompt()))  
print("\n\n")  
  
  
net_connect.write_channel("ssh pvstep13@10.16.0.20\n")  
time.sleep(3)  
output = net_connect.read_channel()  
  
if 'Password:' in output:  
    net_connect.write_channel('XbPj2u#FS-o76\n')  
  
print("Router Promt:{}".format(net_connect.find_prompt()))  
redispatch(net_connect, device_type = 'cisco_ios')  
new_output = net_connect.send_command("sh ip int brief", use_textfsm=True)  
print(new_output)  
  
with open ('Вывод из Пайтона.json', 'w', encoding='utf-8') as f:  
    json.dump(new_output, f, indent=4, ensure_ascii=False)
```


Также использовались статьи [Автоматизация сетевого оборудования на Python. Работа через jump-host / Хабр](https://habr.com/ru/companies/rostelecom/articles/823282/)

________________________________________________________________________
Paths: [[Scripts]]
Tags: #Scripts   

