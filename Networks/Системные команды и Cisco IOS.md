
Операционная система Cisco IOS - Internetwork Operating System является базовым программным обеспечением устройств Cisco  

В нашем курсе есть лабораторные работы, которые ты будешь выполнять в программе Packet Tracer на эмуляторах оборудования **Cisco**. Поэтому следующие несколько тем будут посвящены рассказу про операционную систему устройств **Cisco** и устройству командной строки, через которую их настраивают.  
  
Сначала поговорим про операционную систему **IOS**, разработанную компанией **Cisco**. **Cisco IOS** или **Internetwork Operating System** (межсетевая операционная система) это программное обеспечение, которое используется в большинстве коммутаторов и маршрутизаторов Cisco (ранние версии коммутаторов работали на **CatOS**). **IOS** включает в себя функции маршрутизации, коммутации, межсетевого взаимодействия и телекоммуникаций, интегрированных в мультизадачную операционную систему.

Не все продукты Cisco используют **IOS**. Исключения составляют продукты безопасности **ASA**, которые используют операционную систему Linux и роутеры-маршрутизаторы, которые запускают **IOS-XR**. Cisco IOS включает в себя ряд различных операционных систем, работающих на различных сетевых устройствах. Существует много различных вариантов Cisco IOS: для коммутаторов, маршрутизаторов и других сетевых устройств Cisco, версии IOS для определенных сетевых устройств, наборы функций IOS, предоставляющие различные пакеты функций и сервисов.

Сам файл **IOS** имеет размер в несколько мегабайт и хранится в полупостоянной области памяти под названием **flash**. Флэш-память обеспечивает энергонезависимое хранилище. Это означает, что содержимое памяти не теряется, когда устройство теряет питание. Во многих устройствах Cisco IOS копируется из флэш-памяти в оперативное запоминающее устройство ОЗУ (RAM), когда устройство включено, затем IOS запускается из ОЗУ, когда устройство работает. ОЗУ имеет множество функций, включая хранение данных, которые используются устройством для поддержки сетевых операций. Работа IOS в ОЗУ повышает производительность устройства, однако ОЗУ считается энергозависимой памятью, поскольку данные теряются во время цикла питания. Цикл питания - это когда устройство намеренно или случайно отключается, а затем снова включается.

Управление устройствами с **IOS** происходит при помощи интерфейса командной строки (**CLI** - _Command Line Interface_), при подключении при помощи консольного кабеля, по **Telnet**, **SSH** либо при помощи **AUX** порта.

Названия версий **Cisco IOS** состоят из трех чисел, и нескольких символов **a.b(c.d)e**, где:

- **a** – номер основной версии
- **b** – номер младшей версии (незначительные изменения)
- **c** – порядковый номер релиза
- **d** – промежуточный номер сборки
- **e** (ноль, одна или две буквы) – идентификатор последовательности выпуска программного обеспечения, такой как none (который обозначает основную линию), T (Technology), E (Enterprise), S (Service provider), XA специальный функционал, XB как другой специальный функционал и т. д.

**Rebuild** – часто ребилды выпускаются чтобы исправить одну конкретную проблему или уязвимость для данной версии IOS. Ребилды производятся либо для быстрого устранения проблемы, либо для удовлетворения потребностей клиентов, которые не хотят обновляться до более поздней крупной версии, поскольку они могут использовать критическую инфраструктуру на своих устройствах и, следовательно, предпочитают свести к минимуму изменения и риск.

**Interim release** – промежуточные выпуски, которые обычно производятся на еженедельной основе и образуют срез текущих наработок в области развития.

**Maintenance release** – протестированные версии, которые включают в себя усовершенствования и исправления ошибок. Компания Cisco рекомендует, по возможности, обновлять ПО до версии Maintenance.

![[IOS.png]]

Стадии развития:

- **Early Deployment (ED)** – ранее развертывание, вводятся новые функции и платформы.
- **Limited Deployment (LD)** – первоначальная лимитированная развертка, включают в себя исправления ошибок.
- **General Deployment (GD)** – общее развертывание ОС, происходит тестирование, доработка и подготовка к выпуску окончательной версии. Такие выпуски, как правило, стабильны на всех платформах
- **Maintenance Deployment (MD)** – эти выпуски используются для дополнительной поддержки, исправлений ошибок и постоянного обслуживания программного обеспечения.

Большинство устройств Cisco, которые используют **IOS**, также имеют один или несколько «наборов функций» или «пакетов» - **Feature Set**. Например, выпуски Cisco IOS, предназначенные для использования на коммутаторах Catalyst, доступны как «стандартные» версии (обеспечивающие только базовую IP-маршрутизацию), «расширенные» версии, которые предоставляют полную поддержку маршрутизации IPv4 и версии «расширенных IP-сервисов», которые предоставляют расширенные функции, а также поддержку IPv6.

Каждый отдельный **feature set** соответствует одной категории услуг помимо базового набора (**IP Base** – Static Routes, OSPF, RIP, EIGRP. ISIS, BGP, IMGP, PBR, Multicast):

- **IP-данные** (**Data** – добавляет BFD, IP SLAs, IPX, L2TPv3, Mobile IP, MPLS, SCTP)
- **Голос** (**Unified Communications** – CUBE, SRST, Voice Gateway, CUCME, DSP, VXML)
- **Безопасность и VPN** (**Security** — Firewall, SSL VPN, DMVPN, IPS, GET VPN, IPSec).

________________________________________________________________________

ПРОВЕРКА СИНТАКСИСА КОМАНД

Когда команда отправляется нажатием клавиши **Enter**, интерпретатор командной строки анализирует команду слева направо, чтобы определить, какое действие запрашивается. Обычно **IOS** обеспечивает только отрицательную обратную связь, если что-то было введено неверно. Если интерпретатор не может понять введенную команду, он предоставит информацию о том, что не так с командой.

---

**Двойственная команда (Ambiguous command)** – введено недостаточно символов для, чтобы система распознала команду.

Switch# c
% Ambiguous command:’c’

---

**Неполная команда (Incomplete command)** – не все необходимые ключевые слова или аргументы были введены.

```cisco
Switch# clock set
```
% Incomplete command.

---

**Неверная команда (Invalid input)** – команда введена некорректно. Ошибка произошла в месте, на которое указывает маркер

Switch#clok set 13:30:00 21 February 2018 ^
%Invalid input detected at ‘^’ marker.

---

### ГОРЯЧИЕ КЛАВИШИ И СОЧЕТАНИЯ КЛАВИШ

В **CLI IOS** есть возможность использовать горячие клавиши и сочетания клавиш, которые облегчают использование системы. Рассмотрим наиболее полезные из них:

- **Стрелка вниз** - позволяет прокручивать строку вперед по введенным командам
- **Стрелка вверх** – Позволяет прокручивать строку назад по введенным командам
- **Tab** - завершает оставшуюся часть частично введенной команды или ключевого слова
- **Ctrl-A** - переход к началу строки
- **Ctrl-E** - перемещение в конец строки
- **Ctrl-R** – повторное отображение строки
- **Ctrl-Z** - Выход из режима конфигурации и возврат к User EXEC
- **Ctrl-C** - выход из режима конфигурации или прерывание текущей команды
- **Ctrl-Shift-6** - Позволяет пользователю прерывать процесс IOS, такой как ping или traceroute


________________________________________________________________________

**Troubleshooting в Cisco IOS**

Мы продолжаем рассказывать про операционную систему **Cisco IOS**, и сегодня рассмотрим какие команды можно использовать для просмотра информации об устройстве, а также для выявления неполадок (troubleshooting).

Основная команда, которая нам в этом поможет, это команда **show** и различные ключевые слова. Существует много различных вариантов этой команды, и чтобы получить список всех доступных в данном режиме или контексте команд следует использовать вопросительный знак “**?**” после **show**.

Switch# show ? 

Типичная команда **show** может предоставлять информацию о конфигурации, работе и статусе частей коммутатора или маршрутизатора Cisco. Очень часто используемая команда **show** - это демонстрационные интерфейсы. Эта команда отображает статистику для всех интерфейсов на устройстве. Там будет показано состояния интерфейсов и протоколов, их использование, ошибки, MTU и прочее. Чтобы просмотреть статистику для определенного интерфейса, введите команду **show interfaces**, за которой следует конкретный тип интерфейса и номер слота или порта.

Например:

Switch# show interfaces fastethernet 0/1

И если эта команда кажется длинной, то ее можно сократить до такого вида:

Switch# sh int fa 0/1

Одной из наиболее часто используемых команд на коммутаторе или маршрутизаторе является **show version**.

Эта команда отображает информацию о текущей загруженной версии IOS, а также информацию об оборудовании и устройстве. Если вы подключены к маршрутизатору или удаленному коммутатору, команда **show version** является отличным средством быстрого поиска полезной сводной информации о конкретном устройстве, к которому вы подключены.

Из вывода этой команды можно получить следующую информацию:

- **Software version** - версия программного обеспечения IOS (хранится во флэш-памяти);
- **Bootstrap version** - версия Bootstrap (хранится в Boot ROM);
- **System up-time** - время после последней перезагрузки;
- **System restart info** - информация о перезапуске системы - способ перезагрузки (например, цикл питания, сбой);
- **Software image name** - имя файла IOS, хранящееся во флэш-памяти;
- **Router type and processor type** - номер модели и тип процессора;
- **Memory type and allocation** - Тип и распределение ОЗУ;
- **Software features** - Поддерживаемые протоколы /наборы функций;
- **Hardware interfaces** - Интерфейсы, доступные на устройстве;
- **Configuration register** - Устанавливает параметры загрузки, настройку скорости консоли и связанные параметры;

Если команда выводит больше данных, чем может отображаться на одном экране, в нижней части экрана появляется сообщение **--More--**. Когда появится строка **--More--**, нужно нажать пробел, чтобы просмотреть следующую часть вывода. Чтобы отобразить только следующую строку, нужно нажать клавишу Enter. Если нажать какую-либо другую клавишу, то вывод будет отменен.

В таком случае если выводится много информации можно использовать фильтры, которая поможет вычленить необходимую информацию из общего вывода. Для этого после команды show и ее аргумента нужно поставить символ “**|**” (pipe), указать фильтр и регулярное выражение, по которому будет произведен поиск.

Например:

Switch# show run | include ip dhcp pool 

Где **include** это фильтр, а **ip dhcp pool** это регулярное выражение.

Использовать можно такие фильтры:

- **include** – отобразит те строки из выдачи, в которых есть регулярное выражение;
- **exclude** – отобразит все те строки из выдачи, в которых нет регулярного выражения;
- **begin** – отобразит все строки, начиная со строки, где находится регулярное выражение;
- **section** – отобразит раздел с регулярным выражением в названии;

Также рассмотрим другие часто используемые команды, которые могут быть полезны

|   |   |
|---|---|
|**show running-config**|Отображает содержимое текущего запущенного файла конфигурации|
|**show startup-config**|Отображает сохраненную конфигурацию, расположенную в NVRAM|
|**show ip interface**|Отображает статус IP протокола и его сервисов на всех интерфейсах. Для вывода краткой информации можно использовать команду show ip interface brief|
|**show ip route**|Отображает таблицу маршрутизации роутера, где показаны все доступные сети, используемые протоколы маршрутизации и их метрики|
|**show arp**|Показывает ARP таблицу|
|**show mac-address-table**|Показывает таблицу mac адресов|
|**show cdp neighbors**|Показывает соседние устройства Cisco, использующие протокол CDP|
|**show spanning-tree**|Отображает информацию о протоколе STP|
|**show vlan**|Показывает информацию о всех VLAN’ах в системе. Для краткой сводки можно использовать команду|
|**show ip dhcp binding**|Отображает информацию о адресах, выданных DHCP сервером|
|**show ip nat translations**|Показывает таблицу NAT трансляций|
|**show history**|Показывает введенные ранее команды|
|**show inventory**|Отображает информацию о продукте в виде UDI. UDI представляет собой комбинацию из трех отдельных элементов данных: идентификатор продукта (PID), идентификатор версии (VID) и серийный номер (SN).|
|**show hardware**|Отображает информацию “железе”|
|**show power**|Отображает информацию о питании|
|**show processes**|Отображает активные процессы системы|
|**show protocols**|Показывает используемые протоколы|
|**show flash**|Показывает содержимое флеш памяти|

Стоит заметить, что команды могут отличаться в зависимости от типа и модели устройства, а также версии IOS. Поэтому информацию о командах для конкретной модели лучше всего уточнять на сайте производителя.
________________________________________________________________________
Paths: [[Networks]]
Tags: #Networks 