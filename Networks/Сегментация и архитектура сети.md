Способы сегментации сети включают использование физических и логических методов для разделения сети на более мелкие, управляемые участки, что повышает безопасность, улучшает производительность и облегчает управление трафиком. Основные способы: 
1. VLAN (виртуальные локальные сети)
2. подсети (разделение диапазонов IP-адресов)
3. микросегментация (изоляция на уровне рабочих нагрузок)
4. межсетевые экраны для фильтрации трафика 
5. списки контроля доступа (ACL)


Традиционная сетевая инфраструктура
![[arh2.png]]

Что не устраивает в традиционной схеме?  

- Резкое снижение производительности при отказе на уровне агрегации;
- Недостаточная масштабируемость, вызываемая уровнем агрегации:  
    - MAC / ARP
    - VLAN'ы
    - перегруженность точек обмена горизонтальным трафиком;
- резкое возрастание сложности структуры при увеличении надежности;
- Множество проприетарных вариантов используемых протоколов (MLAG, vPC, варианты STP, UDLD, Bridge Assurance, LACP, FHRP, VRRP, HSRP, GLBP, VTP, MVRP...)
  
Решение? Как только мы начинаем говорить о масштабах, когда стоимость обслуживания начинает превосходить стоимость оборудования (да-да, столь любимые бухгалтерами и маркетологами, и нелюбимые остальными CAPEX и OPEX), как на сцену выходит давно известное решение в виде сетей Клоза (Clos fabric), известное также как архитектура **Leaf-Spine**.

![[arh3.png]]

Важное примечание для невнимательных: уровень Spine вовсе не идентичен уровню агрегации. На этом уровне нет и не предполагается горизонтальных связей между коммутаторами и уж тем более не предполагается, что весь трафик через этот уровень собирается и уходит в сторону ядра или, допустим, интернета.  
  
Сама по себе это архитектура известна уже полвека и успешно применяется в телефонных сетях, но сейчас сложились все предпосылки для ее активного внедрения в с сети ЦОД. С одной стороны, оборудование стало одновременно достаточно производительным и недорогим, при этом обеспечивая крайне малые задержки (сотни наносекунд — это уже не фантастика, а вполне реальность). Ну а с другой сами задачи стали такими, когда централизованная архитектура становится неоптимальной.  
  
Что же обеспечивает Leaf-Spine в приложении к рассматриваемым нами структурам?  

- Возможность опереться на ECMP (_который с марта 2014 однозначно определен и признан в качестве стандарта IEEE 802.1Qbp_) в условиях сплошной IP-фабрики;
- Облегчение устранения отказов оборудования за счет его однородности;
- Предсказуемая латентность;
- Отличая масштабируемость;
- Простота автоматизации управления;
- Меньшее падение пропускной способности сети при отказе оборудования;
- TOR (Top of Rack) вместо EOR (End of Row). _О специфике TOR и EOR можно почитать вот в этой [довольно старой, но по-прежнему актуальной статье](http://bradhedlund.com/2009/04/05/top-of-rack-vs-end-of-row-data-center-designs/))_

  
Бонусом:  

- Схема по умолчанию защищена от появления петель и не требует для этого STP;
- Если порт не отвечает — протокол маршрутизации считает его выпавшим и не рассматривает возможность его участия в маршрутах, в отличие от STP.

**Иерархическая модель сети от Cisco**

3-уровневая иерархическая модель Cisco нацелена на построение надежной, масштабируемой и высокопроизводительной сетевой конструкции. Этот высокоэффективный сетевой иерархический подход обеспечивает экономичный, модульный, структурированный и простой метод (обеспечивает несложный и единообразный проект) для удовлетворения существующих и будущих потребностей роста сети. Каждый из уровней имеет свои особенности и функциональность, что еще больше упрощает сети.
![[HIM.png]]

Что же заставляет нас переходить к использованию 3-уровневневого иерархического подхода, представлены ниже -

- **Масштабируемость (Scalability)** - эффективно приспосабливается к будущему росту сети;
- **Простота управления и устранения неполадок** - эффективное управление и простота в устранении причины сбоя;
- **Более простая и структурированная фильтрация и принудительное применение политик** - проще создавать фильтры/политики и применять их в сети;
- **Избыточность и отказоустойчивость** - в сети могут происходить сбои/простои устройств, и она должна продолжать предоставлять услуги с той же производительностью, в случае выхода из строя основного устройства;
- **Высокая производительность** - иерархическая архитектура для поддержки высокой пропускной способности и высокой производительности базовой активной инфраструктуры;
- **Модульность** - обеспечивает гибкость в проектировании сети и облегчает простое внедрение и устранение неполадок.

---

### УРОВЕНЬ ЯДРА (ВНУТРЕННИЙ УРОВЕНЬ) | CORE LAYER

Этот уровень также называется сетевым магистральным уровнем и отвечает за обеспечение быстрого транспорта между распределительными коммутаторами в пределах кампуса предприятия.

Станциями внутреннего уровня являются коммутаторы высокого класса и высокопроизводительные коммутаторы, имеющие модульный форм-фактор. Это полностью резервные устройства, поддерживающие расширенные функции коммутации уровня 3 и протоколы динамической маршрутизации. Основным здесь является сохранение конфигурации как можно более минимальной на уровне ядра.

Из-за очень высокой критичности этого слоя, проектирование его требует высокого уровня устойчивости для быстрого и плавного восстановления, после любого события сбоя сети в пределах блока ядра.

Ниже приведены основные характеристики внутреннего уровня -

- Высокая производительность и сквозная коммутация;
- Обеспечение надежности и отказоустойчивости;
- Масштабируемый;
- Избегание интенсивных манипуляций с пакетами ЦП, вызванных безопасностью, инспекцией, классификацией качества обслуживания (QoS) или другими процессами.

Вот некоторые модели коммутаторов Cisco, работающих на уровне ядра, являются Catalyst серии 9500/6800/6500 и nexus серии 7000.

---

### РАСПРЕДЕЛИТЕЛЬНЫЙ УРОВЕНЬ | DISTRIBUTION LAYER

Распределительный уровень расположен между уровнями доступа и ядра. Основная функция этого уровня - обеспечить маршрутизацию, фильтрацию и WAN-доступ, а также визуализировать связь между уровнями доступа и ядра. Кроме того, коммутаторы уровня распределения могут предоставлять восходящие службы для многих коммутаторов уровня доступа. Уровень распределения гарантирует, что пакеты маршрутизируются между подсетями и Inter/Intra VLAN в среде кампуса. Как стандартный подход, шлюзы по умолчанию для всех VLAN будут коммутаторами уровня распределения. На самом деле серверные устройства не должны быть напрямую подключены к распределительным коммутаторам. Этот подход обеспечивает экономию затрат на один порт за счет высокой плотности портов при менее дорогостоящих коммутаторах уровня доступа.

Основные функции распределительного уровня перечислены ниже -

- Аккумулирование каналов LAN / WAN;
- Контроль доступа и фильтрация, такие как ACLs и PBR;
- Маршрутизация между локальными сетями и VLAN, а также между доменами маршрутизации;
- Избыточность и балансировка нагрузки;
- Суммирование подсетей и агрегирование маршрутов на границах / к уровню ядра;
- Управление широковещательным доменом. Устройство уровня распределения действует как демаркационная точка между широковещательными доменами.

Основными моделями коммутаторов Cisco, работающих на распределительном уровне, являются Catalyst серии 6800/6500/4500/3850

---

### УРОВЕНЬ ДОСТУПА | ACCESS LAYER

Этот уровень включает в себя коммутаторы уровня 2 и точки доступа, обеспечивающие подключение к рабочим станциям и серверам. На восходящих линиях связи устройства уровня доступа подключаются к распределительным коммутаторам. Мы можем управлять контролем доступа и политикой, создавать отдельные коллизионные домены и обеспечивать безопасность портов на уровне доступа. Коммутаторы уровня доступа обеспечивают доставку пакетов на конечные устройства.

Уровень доступа выполняет ряд функций, в том числе:

- Коммутация уровня 2;
- Высокая доступность;
- Безопасность портов;
- Классификация и маркировка QoS;
- Граница доверия;
- Списки контроля доступа (ACL);
- Остовное дерево.

Основными моделями коммутаторов Cisco, работающих на уровне доступа, являются Catalyst серии 3850/3750/4500/3560/2960.
________________________________________________________________________
Paths: [[Networks]]
Tags: #Networks 